<section class="breadcrumbs-section pad-t-20 pad-r-20">
    <div class="container">
        <ul>
            <li>
                <a routerLink=""><i class="fa fa-home"></i></a>
                <i class="fa fa-long-arrow-right mar-l-10 mar-r-10 arrow"></i>
            </li>
            <li>Account</li>
        </ul>
    </div>
</section>


<section class="account-section mar-t-150">
    <div class="container">
        <div class="row shadow pad-b-100 pad-l-20 pad-r-20">
            <div class="col-md-3 pad-t-30">
                <app-account-menu></app-account-menu>
            </div>
            <div class="col-md-9 pad-t-30">
                <div class="account-form loading">
                    <form class="bg-white"
                          [formGroup]="accountForm"
                          *ngIf="accountForm"
                          (ngSubmit)="submitAccountForm();">
                        <div class="d-sm-flex align-items-end mar-b-70 bg-white">
                            <div class="user-avatar mar-r-20 loading-spinner">
                                <img src="{{ uploadedAvatar ? uploadedAvatar : 'assets/img/noavatar.jpg' }}"
                                     alt="" class="w-100 img-cover">
                            </div>
                            <div class="file-upload mar-t-20">
                                <input type="file"
                                       id="avatarInput"
                                       class="input-file"
                                       formControlName="avatar"
                                       (change)="avatarSelected($event)"/>
                                <label for="avatarInput">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="17" viewBox="0 0 20 17">
                                        <path d="M10 0l-5.2 4.9h3.3v5.1h3.8v-5.1h3.3l-5.2-4.9zm9.3 11.5l-3.2-2.1h-2l3.4
                                        2.6h-3.5c-.1 0-.2.1-.2.1l-.8 2.3h-6l-.8-2.2c-.1-.1-.1-.2-.2-.2h-3.6l3.4-2.6h-2l-3.2
                                        2.1c-.4.3-.7 1-.6 1.5l.6 3.1c.1.5.7.9 1.2.9h16.3c.6 0 1.1-.4
                                         1.3-.9l.6-3.1c.1-.5-.2-1.2-.7-1.5z"/>
                                    </svg>
                                    <span>{{ changedAvatar ? changedAvatar : "Choose an avatar&hellip;" }}</span>
                                </label>
                                <div class="error-text text-left mar-t-10" *ngIf="avatarError">{{ avatarError }}</div>
                            </div>
                        </div>
                        <h6 class="heading-line text-center mar-b-40">
                            <span>General info</span>
                        </h6>
                        <div class="form-group mar-t-30 pad-r-20 pad-l-20">
                            <label for="inputFirstName">First name *:</label>
                            <input type="text"
                                   class="form-control"
                                   id="inputFirstName"
                                   formControlName="firstName"
                                   [class.error]="accountForm.get('firstName')?.touched
                                   && accountForm.get('firstName')?.invalid">
                            <div class="error-text text-left"
                                 *ngIf="accountForm.get('firstName')?.invalid
                                        && accountForm.get('firstName')?.touched">
                                        First name is required
                            </div>
                        </div>
                        <div class="form-group mar-t-30 pad-r-20 pad-l-20">
                            <label for="inputLastName">Last name:</label>
                            <input type="text" class="form-control" formControlName="lastName" id="inputLastName">
                        </div>
                        <div class="form-group mar-t-30  pad-r-30 pad-l-20">
                            <label for="inputEmail">Email *:</label>
                            <input type="text"
                                   class="form-control"
                                   id="inputEmail"
                                   formControlName="email"
                                   [class.error]="accountForm.get('email')?.touched
                                   && accountForm.get('email')?.invalid">
                            <div *ngIf="accountForm.get('email')?.invalid
                                        && accountForm.get('email')?.touched">
                                <div class="error-text text-left"
                                     *ngIf="accountForm.get('email')?.hasError('required')">
                                    Email is required
                                </div>
                                <div class="error-text text-left"
                                     *ngIf="accountForm.get('email')?.hasError('pattern')">
                                    Incorrect email
                                </div>
                            </div>
                        </div>
                        <div class="form-group mar-t-30  pad-r-30 pad-l-20">
                            <label for="inputPhone">Phone:</label>
                            <input type="text"
                                   class="form-control"
                                   id="inputPhone"
                                   formControlName="phone">
                        </div>
                        <div class="form-group mar-t-30  pad-r-30 pad-l-20">
                            <label for="inputWebsite">Website:</label>
                            <input type="text"
                                   class="form-control"
                                   id="inputWebsite"
                                   formControlName="webSite">
                        </div>
                        <h6 class="heading-line text-center mar-b-40 mar-t-80">
                            <span>Address</span>
                        </h6>
                        <div class="form-group mar-t-30 pad-r-20 pad-l-20">
                            <label for="inputZipCode">ZipCode:</label>
                            <input type="text"
                                   class="form-control"
                                   id="inputZipCode"
                                   formControlName="addressZipCode">
                        </div>
                        <div class="form-group mar-t-30 pad-r-20 pad-l-20">
                            <label for="inputCity">City:</label>
                            <input type="text"
                                   class="form-control"
                                   id="inputCity"
                                   formControlName="addressCity">
                        </div>
                        <div class="form-group mar-t-30 pad-r-20 pad-l-20">
                            <label for="inputStreet">Street:</label>
                            <input type="text"
                                   class="form-control"
                                   id="inputStreet"
                                   formControlName="addressStreet">
                        </div>
                        <div class="form-group mar-t-30 pad-r-20 pad-l-20">
                            <label for="inputSuit">Suit:</label>
                            <input type="text"
                                   class="form-control"
                                   id="inputSuit"
                                   formControlName="addressSuit">
                        </div>
                        <h6 class="heading-line text-center mar-b-40 mar-t-80">
                            <span>Company</span>
                        </h6>
                        <div class="form-group mar-t-30 pad-r-20 pad-l-20">
                            <label for="inputName">Name:</label>
                            <input type="text"
                                   class="form-control"
                                   id="inputName"
                                   formControlName="companyName">
                        </div>
                        <div class="form-group mar-t-30 pad-r-20 pad-l-20">
                            <label for="inputCatchPhrase">Catch Phrase:</label>
                            <input type="text"
                                   class="form-control"
                                   id="inputCatchPhrase"
                                   formControlName="companyCatchPhrase">
                        </div>
                        <div class="form-group mar-t-30 mar-b-60 pad-r-20 pad-l-20">
                            <label for="inputBs">Bs:</label>
                            <input type="text"
                                   class="form-control"
                                   id="inputBs"
                                   formControlName="companyBs">
                        </div>
                        <app-alert [success]="accountSuccess"
                                   [messages]="accountMessages"
                                   *ngIf="accountMessages">

                        </app-alert>
                        <div class="text-right mar-t-60 pad-r-20">
                            <button class="btn action-button rounded border-blue bg-blue"
                                    [disabled]="accountButtonClicked">
                                {{ accountButtonClicked ? "Saving..." : "Edit account" }}
                            </button>
                        </div>
                    </form>
                </div>
                <form *ngIf="isDefaultAuthorized" [formGroup]="passwordForm"
                      (ngSubmit)="submitChangePasswordForm()">
                    <h5 class="heading-line text-center mar-b-40 mar-t-100 pad-b-20">
                        <span>Change password</span>
                    </h5>
                    <div class="form-group mar-t-30 pad-r-20 pad-l-20">
                        <input type="password"
                               class="form-control"
                               placeholder="Old password"
                               formControlName="oldPassword"
                               [class.error]="passwordForm.get('oldPassword')?.touched
                                   && passwordForm.get('oldPassword')?.invalid">
                        <div class="error-text text-left"
                             *ngIf="passwordForm.get('oldPassword')?.touched
                                   && passwordForm.get('oldPassword')?.invalid">
                            Old password is required
                        </div>
                    </div>
                    <div class="form-group mar-t-30 pad-r-20 pad-l-20">
                        <input type="password"
                               class="form-control"
                               formControlName="newPassword"
                               placeholder="New password"
                               [class.error]="passwordForm.get('newPassword')?.touched
                                   && passwordForm.get('newPassword')?.invalid">
                        <div *ngIf="passwordForm.get('newPassword')?.touched
                                   && passwordForm.get('newPassword')?.invalid">
                            <div class="error-text text-left"
                                 *ngIf="passwordForm.get('newPassword')?.hasError('required')">
                                New password is required
                            </div>
                            <div class="error-text text-left"
                                 *ngIf="passwordForm.get('newPassword')?.hasError('minlength')">
                                New password length must not be less than 8 characters
                            </div>
                        </div>
                    </div>
                    <div class="form-group mar-t-30 mar-b-60 pad-r-20 pad-l-20">
                        <input type="password"
                               class="form-control"
                               formControlName="newPasswordConfirm"
                               placeholder="New password confirm"
                               [class.error]="passwordForm.get('newPasswordConfirm')?.touched
                                   && passwordForm.get('newPasswordConfirm')?.invalid">
                        <div *ngIf="passwordForm.get('newPasswordConfirm')?.touched
                                   && passwordForm.get('newPasswordConfirm')?.invalid">
                            <div class="error-text text-left"
                                 *ngIf="passwordForm.get('newPasswordConfirm')?.hasError('required')">
                                Please, confirm your password
                            </div>
                        </div>
                        <div class="error-text text-left"
                             *ngIf="passwordForm?.hasError('passwordMatch')">
                            Passwords does not match
                        </div>
                    </div>
                    <app-alert [messages]="passwordMessages"
                               [success]="passwordSuccess"
                               *ngIf="passwordMessages">
                    </app-alert>
                    <div class="text-right mar-t-60 pad-r-20">
                        <button class="btn action-button rounded border-blue bg-blue" [disabled]="passwordButtonClicked">
                            {{ passwordButtonClicked ? "Changing..." : "Change password" }}
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>